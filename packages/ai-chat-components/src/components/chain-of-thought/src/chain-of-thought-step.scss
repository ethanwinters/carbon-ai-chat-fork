/* 
 *  Copyright IBM Corp. 2025
 *  
 *  This source code is licensed under the Apache-2.0 license found in the
 *  LICENSE file in the root directory of this source tree.
 */

@use "../../../globals/scss/vars" as *;
@use "@carbon/styles/scss/theme";
@use "@carbon/styles/scss/type";
@use "@carbon/styles/scss/motion";
@use "@carbon/styles/scss/utilities/button-reset" as button;
@use "@carbon/layout";

:host {
  @include type.type-style("body-01");

  display: block;
  background: var(--cds-layer-02, #{theme.$layer-02});
}

:host([data-step-parity="even"]) {
  background: var(--cds-layer-accent-02, #{theme.$layer-accent-02});
}

.#{$prefix}--chain-of-thought-accordion-item-content {
  display: block;
  overflow: visible;
  background: theme.$layer-01;
  color: theme.$text-primary;
  max-block-size: fit-content;
  opacity: 1;
  transition: all motion.$duration-fast-02 motion.motion(entrance, productive)
    allow-discrete;
}

.#{$prefix}--chain-of-thought-item {
  padding-block: layout.$spacing-05;
  padding-inline: layout.$spacing-07 layout.$spacing-05;
}

.#{$prefix}--chain-of-thought-accordion-item-content[hidden] {
  display: none;
  overflow: hidden;
  max-block-size: 0;
  opacity: 0;
  padding-block: 0;
  padding-inline: 0;
}

.#{$prefix}--chain-of-thought-accordion-item-header-chevron {
  display: flex;
  flex: 0 1 layout.$spacing-07;
  justify-content: center;
  color: theme.$text-primary;
  @media screen and (prefers-reduced-motion: reduce) {
    svg {
      fill: theme.$text-primary;
      transform: rotate(-270deg);
      transition: none;
    }
  }

  svg {
    fill: theme.$text-primary;
    transform: rotate(-270deg);
    transition: all motion.$duration-fast-02 motion.motion(standard, productive);
  }
}

.#{$prefix}--chain-of-thought-accordion-item-header-chevron[data-open] {
  svg {
    transform: rotate(-90deg);
  }
}

.#{$prefix}--chain-of-thought-accordion-item-header-chevron[data-disabled] {
  svg {
    visibility: hidden;
  }
}

.#{$prefix}--chain-of-thought-accordion-item-static {
  @include type.type-style("body-01");

  display: flex;
  align-items: center;

  background: var(--cds-layer-accent-02, #{theme.$layer-accent-02});
  block-size: layout.$spacing-07;
  color: theme.$text-primary;
}

.#{$prefix}--chain-of-thought-accordion-item {
  button.#{$prefix}--chain-of-thought-accordion-item-header {
    @include button.reset(true);
    @include type.type-style("body-01");

    display: flex;
    align-items: center;
    padding: layout.$spacing-03 0;

    background: var(--cds-layer-accent-02, #{theme.$layer-accent-02});
    block-size: layout.$spacing-07;
  }

  button.#{$prefix}--chain-of-thought-accordion-item-header[disabled] {
    cursor: default;
  }

  button.#{$prefix}--chain-of-thought-accordion-item-header:focus,
  button.#{$prefix}--chain-of-thought-accordion-item-header:focus-visible {
    position: relative;
    z-index: 2;
    box-shadow:
      0 -1px 0 0 theme.$focus,
      inset 0 1px 0 0 theme.$focus,
      inset 2px 0 0 0 theme.$focus,
      0 1px 0 0 theme.$focus,
      inset 0 -1px 0 0 theme.$focus,
      inset -2px 0 0 0 theme.$focus;
    outline: none;
  }
}

:host([data-step-parity="odd"]) {
  button.#{$prefix}--chain-of-thought-accordion-item-header,
  .#{$prefix}--chain-of-thought-accordion-item-static {
    background: var(--cds-layer-02, #{theme.$layer-02});
  }
}

.#{$prefix}--chain-of-thought-accordion-item-header-title {
  overflow: hidden;
  flex: 1 1;
  color: theme.$text-primary;
  margin-inline-end: layout.$spacing-03;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.#{$prefix}--chain-of-thought-accordion-item-header-status {
  display: flex;
  flex: 0 0 layout.$spacing-06;
  align-items: center;
  justify-content: center;
}

.#{$prefix}--chain-of-thought-accordion-item-header-status--failure {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-inline-end: layout.$spacing-03;

  svg {
    fill: theme.$support-error;
  }
}

.#{$prefix}--chain-of-thought-accordion-item-header-status--success {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-inline-end: layout.$spacing-03;

  svg {
    fill: theme.$support-success;
  }
}
