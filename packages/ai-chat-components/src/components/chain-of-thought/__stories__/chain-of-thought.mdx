import { ArgTypes, Canvas, Markdown, Meta } from '@storybook/addon-docs/blocks';
import { cdnJs, cdnCss } from "../../../globals/internal/storybook-cdn";
import * as ChainOfThoughtStories from "./chain-of-thought.stories";

<Meta of={ChainOfThoughtStories} />

# AI Chat Chain of Thought

The `cds-aichat-chain-of-thought` component displays a collapsible panel showing the reasoning steps, tool calls, and intermediate outputs that an AI agent used to arrive at its final answer. This enhances transparency and helps users understand the agent's decision-making process.

## Key Features

- **Step-by-Step Display**: Shows each reasoning step with status indicators (processing, success, failure)
- **Tool Call Visualization**: Displays tool names, arguments, and responses with automatic JSON formatting
- **Collapsible Interface**: Each step can be expanded/collapsed individually for detailed inspection
- **Status Icons**: Visual indicators for step status (succeeded, failed, processing)
- **Markdown Support**: Step descriptions and tool responses support markdown formatting
- **Customizable Labels**: All text strings can be customized for internationalization

## Getting started

Here's a quick example to get you started.

### JS (via import)

```javascript
import "@carbon/ai-chat-components/es/components/chain-of-thought/index.js";
```

We provide a lit-react wrapper for this web component to consume in a react application and can be imported as below

```javascript
import ChainOfThought from "@carbon/ai-chat-components/es/react/chain-of-thought.js";
```

<Markdown>{`${cdnJs(["chain-of-thought"])}`}</Markdown>
<Markdown>{`${cdnCss()}`}</Markdown>

### HTML

#### Basic usage

<Canvas of={ChainOfThoughtStories.Default} />

#### With steps open

<Canvas of={ChainOfThoughtStories.WithStepsOpen} />

#### With different statuses

<Canvas of={ChainOfThoughtStories.WithDifferentStatuses} />

#### With complex tool responses

<Canvas of={ChainOfThoughtStories.WithComplexResponses} />

## `<cds-aichat-chain-of-thought>` attributes, properties and events

<ArgTypes of={ChainOfThoughtStories.Default} />

## Step Structure

Each step in the `steps` array can include:

- **title**: Plain text name of the step
- **description**: Optional markdown-formatted description of what the tool does
- **tool_name**: Name of the tool that was called
- **request.args**: Arguments sent to the tool (automatically formatted as JSON if applicable)
- **response.content**: Content returned by the tool (supports JSON and markdown)
- **status**: One of "processing", "success", or "failure"

## Custom Labels

All text strings used in the component can be customized through properties:

- `explainability-text`: Button text to open the panel
- `input-label-text`: Label for step inputs
- `output-label-text`: Label for step outputs
- `tool-label-text`: Label for tool name
- `status-succeeded-label-text`: Label for success icon
- `status-failed-label-text`: Label for failure icon
- `status-processing-label-text`: Label for processing icon
